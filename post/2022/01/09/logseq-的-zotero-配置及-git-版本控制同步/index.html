<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Logseq 的 Zotero 配置及 Git 版本控制同步 - chempeng</title>
    <meta property="og:title" content="Logseq 的 Zotero 配置及 Git 版本控制同步 - chempeng">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
      <meta property="description" content="本文基于 Win10, Logseq 0.5.8, Zotero 5.0.96.3 及 Termux v0.117
[&amp;hellip;] Logseq 可与 Zotero 实现联动1并可以实现 PDF 批注跳转2，目前 Logseq 并未提供同步服务，可借助第三方同步工具（坚果云等），此外也可通过 Git 上传至 Github 或 Gitee 等进行版本控制及云存储同步，但一般如 Github 有 &amp;hellip;">
      <meta property="og:description" content="本文基于 Win10, Logseq 0.5.8, Zotero 5.0.96.3 及 Termux v0.117
[&amp;hellip;] Logseq 可与 Zotero 实现联动1并可以实现 PDF 批注跳转2，目前 Logseq 并未提供同步服务，可借助第三方同步工具（坚果云等），此外也可通过 Git 上传至 Github 或 Gitee 等进行版本控制及云存储同步，但一般如 Github 有 &amp;hellip;">
      
    

    
    
    <meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/chempeng/image/img/2017-05-07-4.1.png">
    
    

    

    
    


<link href='//cdn.bootcss.com/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="/css/custom.css" />

  </head>

  
  <body class="post">
    <header class="masthead">
      <h1><a href="/">chempeng</a></h1>



      <nav class="menu">
  <input id="menu-check" type="checkbox" hidden/>
  <label id="menu-label" for="menu-check" class="unselectable" hidden>
    <span class="icon close-icon">✕</span>
    <span class="icon open-icon">☰</span>
    <span class="text">Menu</span>
  </label>
  <ul>
  
  
  <li><a href="/">Home</a></li>
  
  <li><a href="/about/">About</a></li>
  
  <li><a href="/categories/">Categories</a></li>
  
  <li><a href="/tags/">Tags</a></li>
  
  <li><a href="/index.xml">Subscribe</a></li>
  
  
  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>Logseq 的 Zotero 配置及 Git 版本控制同步</h1>

<h3>chempeng
  /  2022-01-09</h3>
<hr>


      </header>



<blockquote>
<p>本文基于 Win10, Logseq 0.5.8, Zotero 5.0.96.3 及 Termux v0.117</p>
</blockquote>
<p>Logseq 可与 Zotero 实现联动<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>并可以实现 PDF 批注跳转<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>，目前 Logseq 并未提供同步服务，可借助第三方同步工具（坚果云等），此外也可通过 Git 上传至 Github 或 Gitee 等进行版本控制及云存储同步，但一般如 Github 有仓库大小限制，可将 Zotero 中的 PDF 附件通过 <a href="https://chempeng.github.io/post/2017/05/07/%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86%E8%BD%AF%E4%BB%B6-zotero-%E7%9A%84%E4%BD%BF%E7%94%A8/">知识管理软件 Zotero 的使用</a> 中附件同步方法分离存储在坚果云空间中，即可在 Logseq 中打开标注 PDF 又不占用 Github 的仓库空间，本文将简单介绍 Logseq 的 Zotero 配置方法，此外介绍 Logseq 安卓移动端的 Git 同步方法。</p>
<h2 id="logseq-的-zotero-配置">Logseq 的 Zotero 配置</h2>
<p>Zotero 的 API 获取配置具体过程参见<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>，简单来说，进入 <a href="https://www.zotero.org/settings/keys">Zotero API</a> 设置界面，为 Logseq 新建 Key，并将 Key ID 和 User ID 填入 Logseq 的 Zotero settings 中（设置 -&gt; 编辑器 -&gt; Zotero settings）。为分离存储 PDF 附件，需参照 <a href="https://chempeng.github.io/post/2017/05/07/%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86%E8%BD%AF%E4%BB%B6-zotero-%E7%9A%84%E4%BD%BF%E7%94%A8/">知识管理软件 Zotero 的使用</a> 使用 Zotfile 插件进行同步，注意 Logseq 的 Zotero settings中 <code>Zotero linked attachment base directory</code> 和 <code>Zotero data directory</code> 的设置，以下分别为 Zotero, Zotfile 和 Logseq 的设置，保持一致即可。</p>
<p><img src="https://cdn.jsdelivr.net/gh/chempeng/image/img/2017-05-07-4.1.png" alt=""></p>
<p><img src="https://cdn.jsdelivr.net/gh/chempeng/image/img/2017-05-07-11.png" alt=""></p>
<p><img src="https://cdn.jsdelivr.net/gh/chempeng/image/img/2022-01-09-1.png" alt=""></p>
<p>此外，如果想通过 Zotero 的 Better BibTex 插件实现在 Logseq 中的 <a href="https://retorque.re/zotero-better-bibtex/citing/">CITATION KEYS</a> ，需要简单在 Zotero 设置，参见<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup>，如下</p>
<ol>
<li><a href="https://retorque.re/zotero-better-bibtex/installation/">Install the Better BibTeX plugin</a> for Zotero.</li>
<li><strong>Set the</strong> <a href="https://retorque.re/zotero-better-bibtex/installation/preferences/hidden-preferences/#autopindelay"><strong>autoPinDelay</strong></a> <strong>parameter to 1</strong>, or anything greater than 0. This will determine how soon citekeys should be pinned, in seconds.
(Note : this is a hidden parameter. To modify it, you&rsquo;ll need to go to Preferences &gt; Advanced &gt; Config Editor. You can search for &ldquo;autoPinDelay&rdquo;, then double-click to change the value)</li>
<li><strong>Make sure to pin your existing citekeys.</strong> To do so, select all items in view (either with the mouse or the Ctrl-A keyboard shortcut), do a right-click, then navigate to <em>Better BibTeX &gt; Pin BibTeX key</em>.</li>
</ol>
<h2 id="logseq-安卓移动端的-git-同步">Logseq 安卓移动端的 Git 同步</h2>
<p>Logseq 桌面端可方便的是使用 Git，但安卓移动端需要使用 Termux，且目前不能自动 commit，主要内容基于<sup id="fnref:4"><a href="#fn:4" class="footnote-ref" role="doc-noteref">4</a></sup>，做如下记录</p>
<h3 id="1-安装-termux">1. 安装 Termux</h3>
<p>官网 F-Droid 下载 <a href="https://f-droid.org/zh_Hans/packages/com.termux/">Termux</a> 和 <a href="https://f-droid.org/zh_Hans/packages/com.termux.widget/">Termux:Widget</a> （不推荐谷歌市场安装）</p>
<pre><code>pkg install git
termux-setup-storage #链接手机储存空间，产生 storage 文件夹
</code></pre><h3 id="2-链接-github">2. 链接 Github</h3>
<p>生成 ssh key</p>
<pre><code>ssh-keygen -t ed25519 -C &quot;your_email@example.com&quot;
cat .ssh/id_ed25519.pub # SSH Key 内容
</code></pre><p>Github -&gt; Account settings -&gt; SSH and GPG keys -&gt; New SSH key ，将生成的 Key 拷贝其中。</p>
<p>git 推送配置</p>
<pre><code>git config --global user.email &quot;your_email@example.com&quot;
git config --global user.name &quot;your user name&quot;
</code></pre><p>克隆仓库</p>
<pre><code>GH_USER= your github username
GH_REPO= your github repository
git clone git@github.com:$GH_USER/$GH_REPO.git
</code></pre><h3 id="3-同步脚本及快捷按钮">3. 同步脚本及快捷按钮</h3>
<p>在 Termux 跟目录中，编写脚本 <strong><code>pull.sh</code></strong> 、<strong><code>push.sh</code></strong> 和 <strong><code>log.sh</code></strong></p>
<pre><code>#pull.sh
cd $HOME/storage/shared/downloads/logseq-notes
git pull
cd $HOME
bash -c &quot;read -t 3 -n 1&quot;
</code></pre><pre><code>#push.sh
cd $HOME/storage/downloads/logseq-notes
git add .
git commit -m &quot;android on $(date)&quot;
git push
cd $HOME
bash -c &quot;read -t 3 -n 1&quot;
</code></pre><pre><code>#log.sh
cd $HOME/storage/downloads/logseq-notes
git log
cd $HOME
bash -c &quot;read -t 5 -n 1&quot;
</code></pre><p>给予执行权限：<code>chmod +x pull.sh push.sh log.sh </code> ，配置小组件</p>
<pre><code>cd
mkdir .shortcuts
cd shortcuts
ln -s ../push.sh
ln -s ../pull.sh
ln -s ../log.sh
</code></pre><p>在手机桌面可添加 <strong><code>pull.sh</code></strong> 、<strong><code>push.sh</code></strong> 和 <strong><code>log.sh</code></strong> 的小组件按钮。</p>
<h3 id="4-忽略同步冲突文件">4. 忽略同步冲突文件</h3>
<p>添加 .gitgnore 文件忽略部分文件</p>
<pre><code>logseq/pages-metadata.edn
</code></pre><p>若中途添加 .gitgnore ，需删除提交记录</p>
<pre><code>git rm -r --cached path/of/pages-metadata.edn
</code></pre><p>目前防止同步冲突，</p>
<ol>
<li>电脑和手机不要同时编辑</li>
<li>编辑即 push</li>
<li>换终端编辑前 pull</li>
</ol>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p><a href="https://zhuanlan.zhihu.com/p/395008689">Logseq: 现已支持Zotero文献协同</a> <a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2" role="doc-endnote">
<p><a href="https://zhuanlan.zhihu.com/p/397352305">Logseq: 现已上线PDF阅读工具</a> <a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3" role="doc-endnote">
<p><a href="https://alix-lahuec.gitbook.io/zotero-roam/getting-started/prereqs">Better BibTeX &amp; pinned citekeys</a> <a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:4" role="doc-endnote">
<p><a href="https://renerocks.ai/blog/obsidian-encrypted-github-android/#android">Syncing your Obsidian vault to Android via an encrypted GitHub repository</a> <a href="#fnref:4" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/post/2021/01/14/almabte-1.3.2-%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85/">almaBTE 1.3.2 离线安装</a></span>
  <span class="nav-next"></span>
</nav>





<script src="//yihui.org/js/math-code.js"></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script async src="//yihui.org/js/center-img.js"></script>

  



<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/tex.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



  
  <hr>
  <div class="copyright">© <a href="https://chempeng.github.io/">chempeng</a> 2021 | <a href="https://www.zhihu.com/people/chempeng">Zhihu</a> | Powered by <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/yihui/hugo-ivy">Ivy</a></div>
  
  </footer>
  </article>
  
  </body>
</html>

